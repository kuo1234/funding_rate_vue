{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", null, \"Funding Rate Board\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"refresh-btn\",\n    onClick: $setup.fetchData\n  }, \"Refresh\"), _createElementVNode(\"table\", null, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.setSort('symbol')),\n    style: {\n      \"cursor\": \"pointer\"\n    }\n  }, [_cache[4] || (_cache[4] = _createTextVNode(\" Symbol \", -1 /* CACHED */)), $setup.sortKey === 'symbol' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString($setup.sortDesc ? '��' : '��'), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"th\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.setSort('btcc')),\n    style: {\n      \"cursor\": \"pointer\"\n    }\n  }, [_cache[5] || (_cache[5] = _createTextVNode(\" BTCC \", -1 /* CACHED */)), $setup.sortKey === 'btcc' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString($setup.sortDesc ? '��' : '��'), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"th\", {\n    onClick: _cache[2] || (_cache[2] = $event => $setup.setSort('mexc')),\n    style: {\n      \"cursor\": \"pointer\"\n    }\n  }, [_cache[6] || (_cache[6] = _createTextVNode(\" MEXC \", -1 /* CACHED */)), $setup.sortKey === 'mexc' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString($setup.sortDesc ? '��' : '��'), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"th\", {\n    onClick: _cache[3] || (_cache[3] = $event => $setup.setSort('bingx')),\n    style: {\n      \"cursor\": \"pointer\"\n    }\n  }, [_cache[7] || (_cache[7] = _createTextVNode(\" BINGX \", -1 /* CACHED */)), $setup.sortKey === 'bingx' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString($setup.sortDesc ? '��' : '��'), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sortedRates, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.symbol\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.symbol.toUpperCase()), 1 /* TEXT */), _createElementVNode(\"td\", {\n      class: _normalizeClass($setup.rateClass(item.btcc))\n    }, _toDisplayString($setup.formatRate(item.btcc)), 3 /* TEXT, CLASS */), _createElementVNode(\"td\", {\n      class: _normalizeClass($setup.rateClass(item.mexc))\n    }, _toDisplayString($setup.formatRate(item.mexc)), 3 /* TEXT, CLASS */), _createElementVNode(\"td\", {\n      class: _normalizeClass($setup.rateClass(item.bingx))\n    }, _toDisplayString($setup.formatRate(item.bingx)), 3 /* TEXT, CLASS */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onClick","$setup","fetchData","_cache","$event","setSort","style","sortKey","_hoisted_2","_toDisplayString","sortDesc","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","sortedRates","item","key","symbol","toUpperCase","_normalizeClass","rateClass","btcc","formatRate","mexc","bingx"],"sources":["C:\\Users\\kuoth\\Desktop\\btcc\\btcc-funding-board\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2>Funding Rate Board</h2>\n    <button class=\"refresh-btn\" @click=\"fetchData\">Refresh</button>\n    <table>\n      <thead>\n        <tr>\n          <th @click=\"setSort('symbol')\" style=\"cursor:pointer\">\n            Symbol <span v-if=\"sortKey==='symbol'\">{{ sortDesc ? '��' : '��' }}</span>\n          </th>\n          <th @click=\"setSort('btcc')\" style=\"cursor:pointer\">\n            BTCC <span v-if=\"sortKey==='btcc'\">{{ sortDesc ? '��' : '��' }}</span>\n          </th>\n          <th @click=\"setSort('mexc')\" style=\"cursor:pointer\">\n            MEXC <span v-if=\"sortKey==='mexc'\">{{ sortDesc ? '��' : '��' }}</span>\n          </th>\n          <th @click=\"setSort('bingx')\" style=\"cursor:pointer\">\n            BINGX <span v-if=\"sortKey==='bingx'\">{{ sortDesc ? '��' : '��' }}</span>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in sortedRates\" :key=\"item.symbol\">\n          <td>{{ item.symbol.toUpperCase() }}</td>\n          <td :class=\"rateClass(item.btcc)\">{{ formatRate(item.btcc) }}</td>\n          <td :class=\"rateClass(item.mexc)\">{{ formatRate(item.mexc) }}</td>\n          <td :class=\"rateClass(item.bingx)\">{{ formatRate(item.bingx) }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\n\nconst fundingRates = ref([])\nlet fetchTimer = null\n\nconst sortKey = ref('symbol')\nconst sortDesc = ref(false)\n\n// --- localStorage cache ---\nfunction saveCache(data) {\n  localStorage.setItem('fundingRatesCache', JSON.stringify({\n    data,\n    ts: Date.now()\n  }))\n}\n\nfunction loadCache() {\n  const cache = localStorage.getItem('fundingRatesCache')\n  if (!cache) return null\n  try {\n    const obj = JSON.parse(cache)\n    // �u��10���������֨�\n    if (Date.now() - obj.ts < 10 * 60 * 1000) {\n      return obj.data\n    }\n  } catch {}\n  return null\n}\n\nfunction rateClass(rate) {\n  if (rate === null || rate === undefined) return ''\n  return Math.abs(rate) > 0.5 ? 'high' : Math.abs(rate) > 0.2 ? 'mid' : ''\n}\n\nfunction formatRate(rate) {\n  return rate !== null && rate !== undefined ? rate.toFixed(4) + '%' : ''\n}\n\nfunction setSort(key) {\n  if (sortKey.value === key) {\n    sortDesc.value = !sortDesc.value\n  } else {\n    sortKey.value = key\n    sortDesc.value = false\n  }\n}\n\nconst sortedRates = computed(() => {\n  const arr = [...fundingRates.value]\n  arr.sort((a, b) => {\n    let v1 = a[sortKey.value]\n    let v2 = b[sortKey.value]\n    if (sortKey.value === 'symbol') {\n      v1 = v1?.toUpperCase() || ''\n      v2 = v2?.toUpperCase() || ''\n      return sortDesc.value ? v2.localeCompare(v1) : v1.localeCompare(v2)\n    } else {\n      v1 = v1 ?? -Infinity\n      v2 = v2 ?? -Infinity\n      return sortDesc.value ? v2 - v1 : v1 - v2\n    }\n  })\n  return arr\n})\n\nasync function fetchData() {\n  try {\n    const res = await fetch('http://localhost:5000/api/funding_rates')\n    const data = await res.json()\n    fundingRates.value = data\n    saveCache(data)\n  } catch {\n    // �p�G���ѡA�ϥΧ֨�\n    const cache = loadCache()\n    if (cache) fundingRates.value = cache\n  }\n}\n\nonMounted(() => {\n  // �������J���Χ֨�\n  const cache = loadCache()\n  if (cache) fundingRates.value = cache\n  fetchData()\n  fetchTimer = setInterval(fetchData, 30000)\n})\nonUnmounted(() => {\n  if (fetchTimer) clearInterval(fetchTimer)\n})\n</script>\n\n<style>\nbody { background: #181818; color: #eee; font-family: 'Segoe UI', Arial, sans-serif; }\n.container { max-width: 900px; margin: 40px auto; background: #222; padding: 24px; border-radius: 12px; box-shadow: 0 2px 16px #0008; }\nh2 { text-align: center; margin-bottom: 24px; color: #00bfff; }\n.refresh-btn {\n  display: block;\n  margin: 0 auto 16px auto;\n  padding: 8px 24px;\n  background: #00bfff;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  font-size: 1em;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.refresh-btn:hover {\n  background: #0099cc;\n}\ntable { border-collapse: collapse; width: 100%; background: #222; }\nth, td { border: 1px solid #333; padding: 12px 8px; text-align: center; }\nth { background: #333; color: #fff; font-size: 1.1em; }\ntr:nth-child(even) { background: #282828; }\n.high { color: #e74c3c; font-weight: bold; background: #2c0a0a; }\n.mid { color: #f39c12; font-weight: bold; background: #2c1a0a; }\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;;;;;;;;;;;;;uBAAtBC,mBAAA,CA6BM,OA7BNC,UA6BM,G,0BA5BJC,mBAAA,CAA2B,YAAvB,oBAAkB,qBACtBA,mBAAA,CAA+D;IAAvDH,KAAK,EAAC,aAAa;IAAEI,OAAK,EAAEC,MAAA,CAAAC;KAAW,SAAO,GACtDH,mBAAA,CAyBQ,gBAxBNA,mBAAA,CAeQ,gBAdNA,mBAAA,CAaK,aAZHA,mBAAA,CAEK;IAFAC,OAAK,EAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,OAAO;IAAYC,KAAsB,EAAtB;MAAA;IAAA;iDAAuB,UAC7C,qBAAYL,MAAA,CAAAM,OAAO,iB,cAAnBV,mBAAA,CAAmE,QAAAW,UAAA,EAAAC,gBAAA,CAAhCR,MAAA,CAAAS,QAAQ,kC,qCAEpDX,mBAAA,CAEK;IAFAC,OAAK,EAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,OAAO;IAAUC,KAAsB,EAAtB;MAAA;IAAA;iDAAuB,QAC7C,qBAAYL,MAAA,CAAAM,OAAO,e,cAAnBV,mBAAA,CAAiE,QAAAc,UAAA,EAAAF,gBAAA,CAAhCR,MAAA,CAAAS,QAAQ,kC,qCAEhDX,mBAAA,CAEK;IAFAC,OAAK,EAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,OAAO;IAAUC,KAAsB,EAAtB;MAAA;IAAA;iDAAuB,QAC7C,qBAAYL,MAAA,CAAAM,OAAO,e,cAAnBV,mBAAA,CAAiE,QAAAe,UAAA,EAAAH,gBAAA,CAAhCR,MAAA,CAAAS,QAAQ,kC,qCAEhDX,mBAAA,CAEK;IAFAC,OAAK,EAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,OAAO;IAAWC,KAAsB,EAAtB;MAAA;IAAA;iDAAuB,SAC7C,qBAAYL,MAAA,CAAAM,OAAO,gB,cAAnBV,mBAAA,CAAkE,QAAAgB,UAAA,EAAAJ,gBAAA,CAAhCR,MAAA,CAAAS,QAAQ,kC,yCAItDX,mBAAA,CAOQ,iB,kBANNF,mBAAA,CAKKiB,SAAA,QAAAC,WAAA,CALcd,MAAA,CAAAe,WAAW,EAAnBC,IAAI;yBAAfpB,mBAAA,CAKK;MAL4BqB,GAAG,EAAED,IAAI,CAACE;QACzCpB,mBAAA,CAAwC,YAAAU,gBAAA,CAAjCQ,IAAI,CAACE,MAAM,CAACC,WAAW,oBAC9BrB,mBAAA,CAAkE;MAA7DH,KAAK,EAAAyB,eAAA,CAAEpB,MAAA,CAAAqB,SAAS,CAACL,IAAI,CAACM,IAAI;wBAAMtB,MAAA,CAAAuB,UAAU,CAACP,IAAI,CAACM,IAAI,0BACzDxB,mBAAA,CAAkE;MAA7DH,KAAK,EAAAyB,eAAA,CAAEpB,MAAA,CAAAqB,SAAS,CAACL,IAAI,CAACQ,IAAI;wBAAMxB,MAAA,CAAAuB,UAAU,CAACP,IAAI,CAACQ,IAAI,0BACzD1B,mBAAA,CAAoE;MAA/DH,KAAK,EAAAyB,eAAA,CAAEpB,MAAA,CAAAqB,SAAS,CAACL,IAAI,CAACS,KAAK;wBAAMzB,MAAA,CAAAuB,UAAU,CAACP,IAAI,CAACS,KAAK,yB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}