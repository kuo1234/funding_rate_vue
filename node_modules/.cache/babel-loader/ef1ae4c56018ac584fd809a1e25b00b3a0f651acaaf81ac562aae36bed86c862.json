{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const fundingRates = ref([]);\n    let fetchTimer = null;\n    function rateClass(rate) {\n      return rate !== null && Math.abs(rate) > 0.0005 ? 'high' : '';\n    }\n    function formatRate(rate) {\n      return rate !== null ? (Number(rate) * 100).toFixed(4) + '%' : '';\n    }\n    function normalizeRates(rawRates) {\n      // ����\n      const btccMap = {};\n      const mexcMap = {};\n      rawRates.forEach(item => {\n        if (item.exchange === 'BTCC') {\n          btccMap[item.symbol] = item.rate;\n        } else if (item.exchange === 'MEXC') {\n          // MEXC �O�v�ݭ� 100\n          mexcMap[item.symbol] = item.rate;\n        }\n      });\n      // �X�֩Ҧ� symbol\n      const allSymbols = Array.from(new Set([...Object.keys(btccMap), ...Object.keys(mexcMap)]));\n      return allSymbols.map(symbol => ({\n        symbol,\n        btcc: btccMap[symbol] !== undefined ? btccMap[symbol] : null,\n        mexc: mexcMap[symbol] !== undefined ? mexcMap[symbol] : null\n      })).filter(item => item.btcc !== null && Math.abs(item.btcc) > 0.0005 || item.mexc !== null && Math.abs(item.mexc) > 0.0005);\n    }\n    const mergedRates = computed(() => normalizeRates(fundingRates.value));\n    async function fetchData() {\n      const res = await fetch('http://localhost:5000/api/funding_rates');\n      fundingRates.value = await res.json();\n    }\n    onMounted(async () => {\n      await fetchData();\n      fetchTimer = setInterval(fetchData, 30000);\n    });\n    onUnmounted(() => {\n      if (fetchTimer) clearInterval(fetchTimer);\n    });\n    const __returned__ = {\n      fundingRates,\n      get fetchTimer() {\n        return fetchTimer;\n      },\n      set fetchTimer(v) {\n        fetchTimer = v;\n      },\n      rateClass,\n      formatRate,\n      normalizeRates,\n      mergedRates,\n      fetchData,\n      ref,\n      computed,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","fundingRates","fetchTimer","rateClass","rate","Math","abs","formatRate","Number","toFixed","normalizeRates","rawRates","btccMap","mexcMap","forEach","item","exchange","symbol","allSymbols","Array","from","Set","Object","keys","map","btcc","undefined","mexc","filter","mergedRates","value","fetchData","res","fetch","json","setInterval","clearInterval"],"sources":["C:/Users/kuoth/Desktop/btcc/btcc-funding-board/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2>Funding Rate Board</h2>\n    <button class=\"refresh-btn\" @click=\"fetchData\">Refresh</button>\n    <table>\n      <thead>\n        <tr>\n          <th>Symbol</th>\n          <th>BTCC</th>\n          <th>MEXC</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in mergedRates\" :key=\"item.symbol\">\n          <td>{{ item.symbol }}</td>\n          <td :class=\"rateClass(item.btcc)\">\n            {{ item.btcc !== null ? formatRate(item.btcc) : '' }}\n          </td>\n          <td :class=\"rateClass(item.mexc)\">\n            {{ item.mexc !== null ? formatRate(item.mexc) : '' }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\n\nconst fundingRates = ref([])\nlet fetchTimer = null\n\nfunction rateClass(rate) {\n  return rate !== null && Math.abs(rate) > 0.0005 ? 'high' : ''\n}\n\nfunction formatRate(rate) {\n  return rate !== null ? (Number(rate) * 100).toFixed(4) + '%' : ''\n}\n\nfunction normalizeRates(rawRates) {\n  // ����\n  const btccMap = {}\n  const mexcMap = {}\n  rawRates.forEach(item => {\n    if (item.exchange === 'BTCC') {\n      btccMap[item.symbol] = item.rate\n    } else if (item.exchange === 'MEXC') {\n      // MEXC �O�v�ݭ� 100\n      mexcMap[item.symbol] = item.rate \n    }\n  })\n  // �X�֩Ҧ� symbol\n  const allSymbols = Array.from(new Set([...Object.keys(btccMap), ...Object.keys(mexcMap)]))\n  return allSymbols.map(symbol => ({\n    symbol,\n    btcc: btccMap[symbol] !== undefined ? btccMap[symbol] : null,\n    mexc: mexcMap[symbol] !== undefined ? mexcMap[symbol] : null,\n  })).filter(item =>\n    (item.btcc !== null && Math.abs(item.btcc) > 0.0005) ||\n    (item.mexc !== null && Math.abs(item.mexc) > 0.0005)\n  )\n}\n\nconst mergedRates = computed(() => normalizeRates(fundingRates.value))\n\nasync function fetchData() {\n  const res = await fetch('http://localhost:5000/api/funding_rates')\n  fundingRates.value = await res.json()\n}\n\nonMounted(async () => {\n  await fetchData()\n  fetchTimer = setInterval(fetchData, 30000)\n})\nonUnmounted(() => {\n  if (fetchTimer) clearInterval(fetchTimer)\n})\n</script>\n\n<style>\nbody { background: #181818; color: #eee; font-family: 'Segoe UI', Arial, sans-serif; }\n.container { max-width: 900px; margin: 40px auto; background: #222; padding: 24px; border-radius: 12px; box-shadow: 0 2px 16px #0008; }\nh2 { text-align: center; margin-bottom: 24px; color: #00bfff; }\n.refresh-btn {\n  display: block;\n  margin: 0 auto 16px auto;\n  padding: 8px 24px;\n  background: #00bfff;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  font-size: 1em;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.refresh-btn:hover {\n  background: #0099cc;\n}\ntable { border-collapse: collapse; width: 100%; background: #222; }\nth, td { border: 1px solid #333; padding: 12px 8px; text-align: center; }\nth { background: #333; color: #fff; font-size: 1.1em; }\ntr:nth-child(even) { background: #282828; }\n.high { color: #e74c3c; font-weight: bold; }\n</style>"],"mappings":";;;;;;;;;;;AA4BA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAI;;;;;;;IAE1D,MAAMC,YAAY,GAAGJ,GAAG,CAAC,EAAE;IAC3B,IAAIK,UAAU,GAAG,IAAG;IAEpB,SAASC,SAASA,CAACC,IAAI,EAAE;MACvB,OAAOA,IAAI,KAAK,IAAI,IAAIC,IAAI,CAACC,GAAG,CAACF,IAAI,CAAC,GAAG,MAAM,GAAG,MAAM,GAAG,EAAC;IAC9D;IAEA,SAASG,UAAUA,CAACH,IAAI,EAAE;MACxB,OAAOA,IAAI,KAAK,IAAI,GAAG,CAACI,MAAM,CAACJ,IAAI,CAAC,GAAG,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,EAAC;IAClE;IAEA,SAASC,cAAcA,CAACC,QAAQ,EAAE;MAChC;MACA,MAAMC,OAAO,GAAG,CAAC;MACjB,MAAMC,OAAO,GAAG,CAAC;MACjBF,QAAQ,CAACG,OAAO,CAACC,IAAI,IAAI;QACvB,IAAIA,IAAI,CAACC,QAAQ,KAAK,MAAM,EAAE;UAC5BJ,OAAO,CAACG,IAAI,CAACE,MAAM,CAAC,GAAGF,IAAI,CAACX,IAAG;QACjC,CAAC,MAAM,IAAIW,IAAI,CAACC,QAAQ,KAAK,MAAM,EAAE;UACnC;UACAH,OAAO,CAACE,IAAI,CAACE,MAAM,CAAC,GAAGF,IAAI,CAACX,IAAI;QAClC;MACF,CAAC;MACD;MACA,MAAMc,UAAU,GAAGC,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAAC,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACX,OAAO,CAAC,EAAE,GAAGU,MAAM,CAACC,IAAI,CAACV,OAAO,CAAC,CAAC,CAAC;MACzF,OAAOK,UAAU,CAACM,GAAG,CAACP,MAAM,KAAK;QAC/BA,MAAM;QACNQ,IAAI,EAAEb,OAAO,CAACK,MAAM,CAAC,KAAKS,SAAS,GAAGd,OAAO,CAACK,MAAM,CAAC,GAAG,IAAI;QAC5DU,IAAI,EAAEd,OAAO,CAACI,MAAM,CAAC,KAAKS,SAAS,GAAGb,OAAO,CAACI,MAAM,CAAC,GAAG;MAC1D,CAAC,CAAC,CAAC,CAACW,MAAM,CAACb,IAAI,IACZA,IAAI,CAACU,IAAI,KAAK,IAAI,IAAIpB,IAAI,CAACC,GAAG,CAACS,IAAI,CAACU,IAAI,CAAC,GAAG,MAAM,IAClDV,IAAI,CAACY,IAAI,KAAK,IAAI,IAAItB,IAAI,CAACC,GAAG,CAACS,IAAI,CAACY,IAAI,CAAC,GAAG,MAC/C;IACF;IAEA,MAAME,WAAW,GAAG/B,QAAQ,CAAC,MAAMY,cAAc,CAACT,YAAY,CAAC6B,KAAK,CAAC;IAErE,eAAeC,SAASA,CAAA,EAAG;MACzB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,yCAAyC;MACjEhC,YAAY,CAAC6B,KAAK,GAAG,MAAME,GAAG,CAACE,IAAI,CAAC;IACtC;IAEAnC,SAAS,CAAC,YAAY;MACpB,MAAMgC,SAAS,CAAC;MAChB7B,UAAU,GAAGiC,WAAW,CAACJ,SAAS,EAAE,KAAK;IAC3C,CAAC;IACD/B,WAAW,CAAC,MAAM;MAChB,IAAIE,UAAU,EAAEkC,aAAa,CAAClC,UAAU;IAC1C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}